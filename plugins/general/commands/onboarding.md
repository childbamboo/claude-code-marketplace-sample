---
description: プロジェクトのオンボーディングを実施し、CLAUDE.mdを生成または改善します
category: workflow
complexity: standard
mcp-servers: [serena]
---

# /onboarding - プロジェクトオンボーディング & CLAUDE.md管理

## 核となる機能

Serena MCP統合を通じて包括的なプロジェクトオンボーディングを実行し、収集されたプロジェクト情報に基づいてCLAUDE.mdの生成または改善を管理します。

## コマンド構文

```
/onboarding [--regenerate] [--dry-run] [--skip-validation]
```

**オプション:**
- `--regenerate`: 既存のCLAUDE.mdを強制的に再生成
- `--dry-run`: 変更を適用せずにプレビュー
- `--skip-validation`: 変更の確認をスキップ

## トリガーシナリオ

このコマンドは以下の状況で実行すべきです：

### 必須トリガー
- **新規プロジェクト参加時**: チームメンバーがプロジェクトに初めて参加したとき
- **プロジェクト初期化時**: 新しいリポジトリやプロジェクトをセットアップするとき
- **CLAUDE.md未整備時**: プロジェクトにCLAUDE.mdが存在しない場合

### 推奨トリガー
- **大規模なアーキテクチャ変更後**: プロジェクト構造や技術スタックの大幅な変更があったとき
- **コーディング規約更新後**: 開発標準やベストプラクティスが変更されたとき
- **定期メンテナンス**: 四半期または半期ごとのドキュメント更新サイクル
- **ドキュメント不整合検出時**: CLAUDE.mdの内容が実際のプロジェクト状態と乖離していると感じたとき

### プロアクティブトリガー
- **新メンバーオンボーディング準備**: 新しいメンバーが参加する前の事前準備
- **プロジェクト監査前**: コードレビューや監査の前にドキュメントを最新化
- **マイルストーン到達時**: メジャーバージョンリリースやフェーズ完了時

## 実行フロー

コマンドは5つの連続したフェーズで実行されます：

### 1. **確認**: CLAUDE.md存在チェック
- プロジェクトルートで既存のCLAUDE.mdをスキャン
- 現在のドキュメント完成度を分析
- 実行パスを決定（生成 vs 改善）

### 2. **オンボーディング**: Serena MCPプロジェクト分析
以下の情報を収集するためSerena MCPオンボーディングを実行：
- プロジェクト構造とアーキテクチャパターン
- 技術スタックと依存関係
- コーディング規約とベストプラクティス
- 開発ワークフローとプロセス
- 重要な制約と要件

**アクション:** `serena onboarding` を実行してプロジェクトコンテキストをSerena memoryに取り込みます。

### 3. **分析**: コンテキスト比較 & ギャップ分析
- Serena memoryからプロジェクト情報を取得
- 既存のCLAUDE.md（存在する場合）と比較
- 情報のギャップ、古いコンテンツ、矛盾を特定
- 構造改善を評価

### 4. **生成/提案**: コンテンツ作成または改善
#### パスA: CLAUDE.mdが存在しない場合（生成）
構造化されたセクションで新しいCLAUDE.mdを作成：
- **プロジェクト概要**: 目的、ゴール、背景コンテキスト
- **技術スタック**: 技術、フレームワーク、ツール
- **ディレクトリ構造**: 主要なディレクトリと構成パターン
- **コーディング規約**: スタイルガイドとコーディング標準
- **開発ワークフロー**: ブランチ戦略、コミット規約、CI/CD
- **重要な注意事項**: プロジェクト固有の制約と注意点

#### パスB: CLAUDE.mdが存在する場合（改善）
構造化された改善提案を生成：
- **情報の鮮度**: 更新が必要な古い情報
- **不足している情報**: Serena memoryで特定された重要なギャップ
- **矛盾の指摘**: memoryとドキュメント間の不一致
- **構造の改善**: 組織化と明確性の向上

### 5. **検証**: ユーザー確認 & 適用
- 生成されたコンテンツまたは改善提案を提示
- 明示的なユーザー承認を要求
- 承認された変更をCLAUDE.mdに適用
- 更新の成功を確認

## パフォーマンス要件

- **CLAUDE.md検出**: <100ms
- **Serenaオンボーディング実行**: 可変（ユーザーインタラクション依存）
- **Memory取得 & 分析**: <2秒
- **コンテンツ生成**: <3秒
- **全体目標**: <10秒（ユーザーインタラクションを除く）

## 主要機能

- **インテリジェントオンボーディング**: Serena MCPによる包括的なプロジェクト分析
- **スマート生成**: プロジェクト情報を活用したコンテキスト対応CLAUDE.md作成
- **プロアクティブ改善**: ギャップ分析と構造化された改善提案
- **安全な更新**: 変更適用前の必須ユーザー検証

## 動作境界

**コマンドが実行すること:**
- Serena MCPを通じたプロジェクト構造と規約の分析
- 発見されたプロジェクト情報に基づくドキュメント生成
- 具体的な例を含む実行可能な改善提案の提示
- すべてのファイル変更におけるユーザー決定権の保持

**コマンドが実行しないこと:**
- 明示的なユーザー承認なしでCLAUDE.mdを変更
- 変更を提示せずに既存コンテンツを上書き
- Serena MCPが利用できない状態での実行
- プロジェクト固有性を無視した汎用ドキュメントの生成

## 統合要件

**必須ツール:**
- Serena MCP: `onboarding`, `list_memories`, `read_memory`
- ファイル操作: `Read`, `Write`, `Edit`
- ユーザーインタラクション: `AskUserQuestion` による承認ワークフロー

## 使用例

```bash
# 標準的なオンボーディングと生成/改善
/onboarding

# 既存のCLAUDE.mdを強制的に再生成
/onboarding --regenerate

# 変更を適用せずにプレビュー
/onboarding --dry-run

# 確認プロンプトをスキップ
/onboarding --skip-validation
```

## 成功基準

- ✓ Serena memoryに包括的なプロジェクトコンテキストが含まれている
- ✓ CLAUDE.mdがすべての必須セクションと共に存在する
- ✓ ドキュメントが現在のプロジェクト状態を正確に反映している
- ✓ ユーザーがすべての変更を明示的に承認した
